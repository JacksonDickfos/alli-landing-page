<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resources - Alli</title>
    <link rel="canonical" href="https://youralli.io/resources">
    <link rel="icon" type="image/png" href="the one - no background.png">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">
                    <div class="logo">
                        <img src="logodone.png" alt="Alli Logo">
                    </div>
                </a>
            </div>
            <div class="nav-links">
                <a href="index.html#app-preview">'Alli' App</a>
                <a href="index.html#features">Why Alli?</a>
                <a href="index.html#how-it-works">How It Works</a>
                <a href="resources.html">Resources</a>
                <a href="index.html#waitlist">Join VIP List</a>
            </div>
        </div>
    </nav>

    <!-- Resources Section -->
    <section class="resources-section">
        <div class="container">
            <h1 class="resources-title" id="resources-title" style="cursor: pointer;">Nutrition <span class="ali-gradient">Resources</span></h1>
            <p class="resources-subtitle">Expert articles and guides to support your nutrition journey</p>
            
            <!-- Admin Add Button (hidden by default, shown after password) -->
            <div id="admin-controls" class="admin-controls" style="display: none;">
                <button class="btn-primary" id="add-resource-btn">
                    <i class="fas fa-plus"></i> Add New Article
                </button>
            </div>

            <!-- Resources Grid -->
            <div class="resources-grid" id="resources-grid">
                <!-- Articles will be dynamically loaded here -->
                <div class="resource-card" data-id="1" onclick="window.location.href='article.html?id=1'">
                    <div class="resource-bubble"></div>
                    <img src="https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=800" alt="Understanding Macronutrients" class="resource-image">
                    <div class="resource-content">
                        <h3 class="resource-card-title">Understanding Macronutrients: A Complete Guide</h3>
                        <p class="resource-card-description">Learn about proteins, carbs, and fats and how they fuel your body for optimal health.</p>
                        <div class="resource-meta">
                            <span class="resource-author"><i class="fas fa-user"></i> Alli Nutrition Team</span>
                            <span class="resource-date">January 2025</span>
                        </div>
                    </div>
                </div>
                <div class="resource-card" data-id="2" onclick="window.location.href='article.html?id=2'">
                    <div class="resource-bubble"></div>
                    <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=800" alt="Meal Planning" class="resource-image">
                    <div class="resource-content">
                        <h3 class="resource-card-title">Meal Planning Made Simple</h3>
                        <p class="resource-card-description">Discover practical strategies for planning nutritious meals that fit your busy lifestyle.</p>
                        <div class="resource-meta">
                            <span class="resource-author"><i class="fas fa-user"></i> Alli Nutrition Team</span>
                            <span class="resource-date">January 2025</span>
                        </div>
                    </div>
                </div>
                <div class="resource-card" data-id="3" onclick="window.location.href='article.html?id=3'">
                    <div class="resource-bubble"></div>
                    <img src="https://images.unsplash.com/photo-1523362628745-0c100150b504?w=800" alt="Hydration" class="resource-image">
                    <div class="resource-content">
                        <h3 class="resource-card-title">Hydration: The Foundation of Health</h3>
                        <p class="resource-card-description">Explore why proper hydration is essential and how to ensure you're drinking enough water daily.</p>
                        <div class="resource-meta">
                            <span class="resource-author"><i class="fas fa-user"></i> Alli Nutrition Team</span>
                            <span class="resource-date">January 2025</span>
                        </div>
                    </div>
                </div>
                <div class="resource-card" data-id="4" onclick="window.location.href='article.html?id=4'">
                    <div class="resource-bubble"></div>
                    <img src="https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=800" alt="Healthy Habits" class="resource-image">
                    <div class="resource-content">
                        <h3 class="resource-card-title">Building Healthy Habits That Last</h3>
                        <p class="resource-card-description">Learn evidence-based strategies for creating sustainable nutrition habits that stick.</p>
                        <div class="resource-meta">
                            <span class="resource-author"><i class="fas fa-user"></i> Alli Nutrition Team</span>
                            <span class="resource-date">January 2025</span>
                        </div>
                    </div>
                </div>
                <div class="resource-card" data-id="5" onclick="window.location.href='article.html?id=5'">
                    <div class="resource-bubble"></div>
                    <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=800" alt="Food Labels" class="resource-image">
                    <div class="resource-content">
                        <h3 class="resource-card-title">Understanding Food Labels</h3>
                        <p class="resource-card-description">Navigate nutrition labels with confidence and make informed food choices.</p>
                        <div class="resource-meta">
                            <span class="resource-author"><i class="fas fa-user"></i> Alli Nutrition Team</span>
                            <span class="resource-date">January 2025</span>
                        </div>
                    </div>
                </div>
                <div class="resource-card" data-id="6" onclick="window.location.href='article.html?id=6'">
                    <div class="resource-bubble"></div>
                    <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800" alt="Workout Nutrition" class="resource-image">
                    <div class="resource-content">
                        <h3 class="resource-card-title">Pre and Post-Workout Nutrition</h3>
                        <p class="resource-card-description">Optimize your fitness results with the right foods before and after exercise.</p>
                        <div class="resource-meta">
                            <span class="resource-author"><i class="fas fa-user"></i> Alli Nutrition Team</span>
                            <span class="resource-date">January 2025</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Password Modal -->
    <div id="admin-password-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Admin Access</h2>
                <button class="modal-close" id="close-password-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Enter admin password to add resources:</p>
                <input type="password" id="admin-password" placeholder="Enter password" class="modal-input">
                <div class="modal-error" id="password-error" style="display: none;"></div>
                <button class="btn-primary" id="submit-password">Submit</button>
            </div>
        </div>
    </div>

    <!-- Add Resource Modal -->
    <div id="add-resource-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Add New Resource</h2>
                <button class="modal-close" id="close-add-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="add-resource-form">
                    <div class="form-group">
                        <label for="resource-title">Title</label>
                        <input type="text" id="resource-title" class="modal-input" required>
                    </div>
                    <div class="form-group">
                        <label for="resource-description">Description</label>
                        <textarea id="resource-description" class="modal-input modal-textarea" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="resource-image">Image URL (optional)</label>
                        <input type="url" id="resource-image" class="modal-input" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group">
                        <label for="resource-content">Full Article Content</label>
                        <textarea id="resource-content" class="modal-input modal-textarea" rows="10" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="resource-author">Author (optional)</label>
                        <input type="text" id="resource-author" class="modal-input">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancel-add-resource">Cancel</button>
                        <button type="submit" class="btn-primary">Add Resource</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Resource Modal -->
    <div id="edit-resource-modal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Edit Article</h2>
                <button class="modal-close" id="close-edit-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="edit-resource-form">
                    <input type="hidden" id="edit-resource-id">
                    <div class="form-group">
                        <label for="edit-resource-title">Title</label>
                        <input type="text" id="edit-resource-title" class="modal-input" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-resource-description">Description</label>
                        <textarea id="edit-resource-description" class="modal-input modal-textarea" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit-resource-image">Image URL (optional)</label>
                        <input type="url" id="edit-resource-image" class="modal-input" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group">
                        <label for="edit-resource-content">Full Article Content</label>
                        <textarea id="edit-resource-content" class="modal-input modal-textarea" rows="10" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit-resource-author">Author (optional)</label>
                        <input type="text" id="edit-resource-author" class="modal-input">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancel-edit-resource">Cancel</button>
                        <button type="submit" class="btn-primary">Update Article</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="social-links">
                    <a href="https://www.linkedin.com/company/your-alli" target="_blank"><i class="fab fa-linkedin"></i></a>
                    <a href="https://www.instagram.com/youralli.io/" target="_blank"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <span id="current-year">2025</span> Alli. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <script src="config.js"></script>
    <script src="resources.js"></script>
    <script>
        // Ensure title click and modal handlers work immediately
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already authenticated and show button
            if (sessionStorage.getItem('adminAuthenticated') === 'true') {
                const adminControls = document.getElementById('admin-controls');
                if (adminControls) {
                    adminControls.style.display = 'block';
                }
                
                // Refresh articles to show edit buttons
                if (typeof displayArticles === 'function') {
                    setTimeout(() => {
                        displayArticles();
                    }, 100);
                }
            }
            
            // Add edit button handlers after articles are displayed
            function attachEditHandlers() {
                document.querySelectorAll('.edit-article-btn').forEach(btn => {
                    // Remove any existing handlers to avoid duplicates
                    const newBtn = btn.cloneNode(true);
                    btn.parentNode.replaceChild(newBtn, btn);
                    
                    // Add click handler
                    newBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const articleId = this.getAttribute('data-id');
                        
                        // Try to use global function
                        if (window.openEditModal && typeof window.openEditModal === 'function') {
                            window.openEditModal(articleId);
                        } else if (typeof openEditModal === 'function') {
                            openEditModal(articleId);
                        } else {
                            // Fallback: open modal directly
                            const articles = JSON.parse(localStorage.getItem('articles') || '[]');
                            const article = articles.find(a => a.id === articleId);
                            
                            if (article) {
                                document.getElementById('edit-resource-title').value = article.title || '';
                                document.getElementById('edit-resource-description').value = article.description || '';
                                document.getElementById('edit-resource-image').value = article.image || '';
                                document.getElementById('edit-resource-content').value = article.content || '';
                                document.getElementById('edit-resource-author').value = article.author || '';
                                document.getElementById('edit-resource-id').value = article.id;
                                document.getElementById('edit-resource-modal').style.display = 'flex';
                            }
                        }
                    });
                });
            }
            
            // Attach handlers after a short delay to ensure articles are rendered
            setTimeout(attachEditHandlers, 200);
            
            // Also attach handlers whenever articles might be updated
            const originalDisplayArticles = window.displayArticles;
            if (typeof originalDisplayArticles === 'function') {
                window.displayArticles = function() {
                    originalDisplayArticles();
                    setTimeout(attachEditHandlers, 50);
                };
            }
            
            const title = document.getElementById('resources-title');
            if (title) {
                title.style.cursor = 'pointer';
                title.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const modal = document.getElementById('admin-password-modal');
                    if (modal) {
                        modal.style.display = 'flex';
                        const passwordInput = document.getElementById('admin-password');
                        if (passwordInput) passwordInput.focus();
                    }
                });
            }
            
            // Close modal handlers
            const closePasswordModal = document.getElementById('close-password-modal');
            if (closePasswordModal) {
                closePasswordModal.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const modal = document.getElementById('admin-password-modal');
                    if (modal) {
                        modal.style.display = 'none';
                        document.getElementById('admin-password').value = '';
                        const errorDiv = document.getElementById('password-error');
                        if (errorDiv) errorDiv.style.display = 'none';
                    }
                });
            }
            
            // Close modal when clicking outside
            const adminPasswordModal = document.getElementById('admin-password-modal');
            if (adminPasswordModal) {
                adminPasswordModal.addEventListener('click', function(e) {
                    if (e.target === adminPasswordModal) {
                        adminPasswordModal.style.display = 'none';
                        document.getElementById('admin-password').value = '';
                        const errorDiv = document.getElementById('password-error');
                        if (errorDiv) errorDiv.style.display = 'none';
                    }
                });
            }
            
            // Submit password handler
            const submitPassword = document.getElementById('submit-password');
            if (submitPassword) {
                submitPassword.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const passwordInput = document.getElementById('admin-password');
                    const password = passwordInput ? passwordInput.value : '';
                    
                    // Check password (alli2025)
                    if (password === 'alli2025') {
                        // Set authenticated
                        sessionStorage.setItem('adminAuthenticated', 'true');
                        
                        // Hide modal
                        const modal = document.getElementById('admin-password-modal');
                        if (modal) {
                            modal.style.display = 'none';
                            passwordInput.value = '';
                            const errorDiv = document.getElementById('password-error');
                            if (errorDiv) errorDiv.style.display = 'none';
                        }
                        
                        // Show Add New Article button
                        const adminControls = document.getElementById('admin-controls');
                        if (adminControls) {
                            adminControls.style.display = 'block';
                        }
                        
                        // Refresh articles to show edit buttons
                        if (typeof displayArticles === 'function') {
                            setTimeout(() => {
                                displayArticles();
                            }, 100);
                        }
                    } else {
                        // Show error
                        const errorDiv = document.getElementById('password-error');
                        if (errorDiv) {
                            errorDiv.textContent = 'Incorrect password. Please try again.';
                            errorDiv.style.display = 'block';
                        }
                        if (passwordInput) passwordInput.value = '';
                    }
                });
            }
            
            // Handle Enter key in password field
            const passwordInput = document.getElementById('admin-password');
            if (passwordInput) {
                passwordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        if (submitPassword) submitPassword.click();
                    }
                });
            }
            
            // Add New Article button handler
            const addResourceBtn = document.getElementById('add-resource-btn');
            if (addResourceBtn) {
                addResourceBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const addModal = document.getElementById('add-resource-modal');
                    if (addModal) {
                        addModal.style.display = 'flex';
                    }
                });
            }
            
            // Close Add Resource Modal handlers
            const closeAddModal = document.getElementById('close-add-modal');
            if (closeAddModal) {
                closeAddModal.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const addModal = document.getElementById('add-resource-modal');
                    if (addModal) {
                        addModal.style.display = 'none';
                        const form = document.getElementById('add-resource-form');
                        if (form) form.reset();
                    }
                });
            }
            
            const cancelAddResource = document.getElementById('cancel-add-resource');
            if (cancelAddResource) {
                cancelAddResource.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const addModal = document.getElementById('add-resource-modal');
                    if (addModal) {
                        addModal.style.display = 'none';
                        const form = document.getElementById('add-resource-form');
                        if (form) form.reset();
                    }
                });
            }
            
            // Close Add Resource Modal when clicking outside
            const addResourceModal = document.getElementById('add-resource-modal');
            if (addResourceModal) {
                addResourceModal.addEventListener('click', function(e) {
                    if (e.target === addResourceModal) {
                        addResourceModal.style.display = 'none';
                        const form = document.getElementById('add-resource-form');
                        if (form) form.reset();
                    }
                });
            }
            
            // Close Edit Resource Modal handlers
            const closeEditModal = document.getElementById('close-edit-modal');
            if (closeEditModal) {
                closeEditModal.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const editModal = document.getElementById('edit-resource-modal');
                    if (editModal) {
                        editModal.style.display = 'none';
                        const form = document.getElementById('edit-resource-form');
                        if (form) form.reset();
                    }
                });
            }
            
            const cancelEditResource = document.getElementById('cancel-edit-resource');
            if (cancelEditResource) {
                cancelEditResource.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const editModal = document.getElementById('edit-resource-modal');
                    if (editModal) {
                        editModal.style.display = 'none';
                        const form = document.getElementById('edit-resource-form');
                        if (form) form.reset();
                    }
                });
            }
            
            // Close Edit Resource Modal when clicking outside
            const editResourceModal = document.getElementById('edit-resource-modal');
            if (editResourceModal) {
                editResourceModal.addEventListener('click', function(e) {
                    if (e.target === editResourceModal) {
                        editResourceModal.style.display = 'none';
                        const form = document.getElementById('edit-resource-form');
                        if (form) form.reset();
                    }
                });
            }
            
            // Handle Edit Resource form submission
            const editResourceForm = document.getElementById('edit-resource-form');
            if (editResourceForm) {
                editResourceForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const articleId = document.getElementById('edit-resource-id').value;
                    const title = document.getElementById('edit-resource-title').value;
                    const description = document.getElementById('edit-resource-description').value;
                    const image = document.getElementById('edit-resource-image').value;
                    const content = document.getElementById('edit-resource-content').value;
                    const author = document.getElementById('edit-resource-author').value || 'Alli Nutrition Team';
                    
                    if (!title || !description || !content) {
                        alert('Please fill in all required fields (Title, Description, and Content).');
                        return;
                    }
                    
                    // Update article using Supabase (with localStorage fallback)
                    (async function() {
                        const updatedData = {
                            title: title,
                            description: description,
                            image: image || null,
                            content: content,
                            author: author
                        };
                        
                        // Use updateArticle function if available
                        if (window.updateArticle && typeof window.updateArticle === 'function') {
                            await window.updateArticle(articleId, updatedData);
                        } else if (typeof updateArticle === 'function') {
                            await updateArticle(articleId, updatedData);
                        } else {
                            // Fallback: update localStorage directly
                            let articles = [];
                            try {
                                const stored = localStorage.getItem('articles');
                                if (stored) {
                                    articles = JSON.parse(stored);
                                }
                            } catch (e) {
                                articles = [];
                            }
                            
                            const articleIndex = articles.findIndex(a => a.id === articleId);
                            if (articleIndex !== -1) {
                                articles[articleIndex] = {
                                    ...articles[articleIndex],
                                    ...updatedData
                                };
                                localStorage.setItem('articles', JSON.stringify(articles));
                            }
                        }
                        
                        // Close modal and reset form
                        editResourceModal.style.display = 'none';
                        editResourceForm.reset();
                        
                        // Refresh the grid to show updated article (sorted by date)
                        if (typeof displayArticles === 'function') {
                            await displayArticles();
                        } else {
                            window.location.reload();
                        }
                    })();
                });
            }
            
            // Handle Add Resource form submission
            const addResourceForm = document.getElementById('add-resource-form');
            if (addResourceForm) {
                addResourceForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const title = document.getElementById('resource-title').value;
                    const description = document.getElementById('resource-description').value;
                    const image = document.getElementById('resource-image').value;
                    const content = document.getElementById('resource-content').value;
                    const author = document.getElementById('resource-author').value || 'Alli Nutrition Team';
                    
                    if (!title || !description || !content) {
                        alert('Please fill in all required fields (Title, Description, and Content).');
                        return;
                    }
                    
                    try {
                        const articleData = {
                            title: title,
                            description: description,
                            image: image || null,
                            content: content,
                            author: author
                        };
                        
                        let newArticle;
                        
                        // Use addArticle function if available (Supabase)
                        if (window.addArticle && typeof window.addArticle === 'function') {
                            newArticle = await window.addArticle(articleData);
                        } else if (typeof addArticle === 'function') {
                            newArticle = await addArticle(articleData);
                        } else {
                            // Fallback: add to localStorage directly
                            let articles = [];
                            try {
                                const stored = localStorage.getItem('articles');
                                if (stored) {
                                    articles = JSON.parse(stored);
                                }
                            } catch (e) {
                                articles = [];
                            }
                            
                            newArticle = {
                                id: Date.now().toString(),
                                ...articleData,
                                createdAt: new Date().toISOString()
                            };
                            
                            articles.push(newArticle);
                            localStorage.setItem('articles', JSON.stringify(articles));
                        }
                        
                        if (!newArticle) {
                            alert('Error: Failed to create article. Please try again.');
                            return;
                        }
                        
                        // Add article to grid dynamically (no page reload) - insert at top (newest first)
                    const grid = document.getElementById('resources-grid');
                    if (grid) {
                        // Check if admin is authenticated
                        const isAdmin = sessionStorage.getItem('adminAuthenticated') === 'true';
                        
                        // Create the article card HTML
                        const articleCard = document.createElement('div');
                        articleCard.className = 'resource-card';
                        articleCard.setAttribute('data-id', newArticle.id);
                        articleCard.innerHTML = `
                            <div class="resource-bubble"></div>
                            ${isAdmin ? `<button class="edit-article-btn" data-id="${newArticle.id}" title="Edit Article"><i class="fas fa-edit"></i></button>` : ''}
                            ${newArticle.image ? `<img src="${newArticle.image}" alt="${newArticle.title}" class="resource-image">` : ''}
                            <div class="resource-content">
                                <h3 class="resource-card-title">${newArticle.title}</h3>
                                <p class="resource-card-description">${newArticle.description}</p>
                                <div class="resource-meta">
                                    ${newArticle.author ? `<span class="resource-author"><i class="fas fa-user"></i> ${newArticle.author}</span>` : ''}
                                    <span class="resource-date">${new Date(newArticle.createdAt).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</span>
                                </div>
                            </div>
                        `;
                        
                        // Add click handler for card (not edit button)
                        articleCard.addEventListener('click', function(e) {
                            if (e.target.closest('.edit-article-btn')) {
                                return;
                            }
                            window.location.href = `article.html?id=${newArticle.id}`;
                        });
                        
                        // Add click handler for edit button if admin
                        if (isAdmin) {
                            const editBtn = articleCard.querySelector('.edit-article-btn');
                            if (editBtn) {
                                editBtn.addEventListener('click', function(e) {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    const articleId = this.getAttribute('data-id');
                                    if (window.openEditModal && typeof window.openEditModal === 'function') {
                                        window.openEditModal(articleId);
                                    } else if (typeof openEditModal === 'function') {
                                        openEditModal(articleId);
                                    } else {
                                        console.error('openEditModal function not found');
                                    }
                                });
                            }
                        }
                        
                        // Insert at the top of grid (newest first)
                        articleCard.style.opacity = '0';
                        articleCard.style.transform = 'translateY(20px)';
                        if (grid.firstChild) {
                            grid.insertBefore(articleCard, grid.firstChild);
                        } else {
                            grid.appendChild(articleCard);
                        }
                        
                        // Animate in
                        setTimeout(() => {
                            articleCard.style.transition = 'opacity 0.4s ease, transform 0.4s ease';
                            articleCard.style.opacity = '1';
                            articleCard.style.transform = 'translateY(0)';
                        }, 10);
                        
                        // Close modal and reset form
                        const modalToClose = document.getElementById('add-resource-modal');
                        if (modalToClose) {
                            modalToClose.style.display = 'none';
                        }
                        addResourceForm.reset();
                    } else {
                        alert('Error: Could not add article to grid.');
                    }
                    } catch (error) {
                        console.error('Error adding article:', error);
                        alert('Error adding article: ' + (error.message || 'Unknown error'));
                    }
                });
            }
        });
    </script>
</body>
</html>

